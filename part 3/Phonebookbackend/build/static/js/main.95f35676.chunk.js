(this.webpackJsonpcourseinfo=this.webpackJsonpcourseinfo||[]).push([[0],{21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var o=t(15),c=t(3),a=t(0),r=t(1),l=t(14),s=t.n(l),u=(t(21),t(4)),i=t.n(u),d="/persons",f=function(){return i.a.get(d)},j=function(e){return i.a.post(d,e)},m=function(e,n){return i.a.put("".concat(d,"/").concat(e),n)},b=function(e){return i.a.delete("".concat(d,"/").concat(e))},h=function(e){var n=e.persons,t=e.handleDelete;return console.log({persons:n}),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("li",{children:[n.name," ",n.number,Object(a.jsx)("button",{onClick:t,children:" delete"})]})})},g=function(e){var n=e.addName,t=e.newName,o=e.handleNameChange,c=e.newNumber,r=e.handleNumberChange;return Object(a.jsxs)("form",{onSubmit:n,children:[Object(a.jsxs)("div",{children:["name: ",Object(a.jsx)("input",{value:t,onChange:o})]}),Object(a.jsxs)("div",{children:["number: ",Object(a.jsx)("input",{value:c,onChange:r})]}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var n=e.filterResult;return Object(a.jsxs)("li",{children:[n.name," ",n.number]})},p=function(e){var n=e.message;return null===n?null:Object(a.jsx)("div",{className:"success",children:n})},v=function(e){var n=e.message;return null===n?null:Object(a.jsx)("div",{className:"error",children:n})},x=function(){var e=Object(r.useState)([]),n=Object(c.a)(e,2),t=n[0],l=n[1],s=Object(r.useState)(""),u=Object(c.a)(s,2),i=u[0],d=u[1],x=Object(r.useState)(""),w=Object(c.a)(x,2),N=w[0],y=w[1],S=Object(r.useState)(""),C=Object(c.a)(S,2),k=C[0],D=C[1],J=Object(r.useState)(null),I=Object(c.a)(J,2),T=I[0],A=I[1],E=Object(r.useState)(null),F=Object(c.a)(E,2),L=F[0],R=F[1];Object(r.useEffect)((function(){console.log("effect"),f().then((function(e){console.log("getAll()response",e),console.log("promise fulfilled"),l(e.data),console.log("getAll()response.data",e.data)}))}),[]);var $=t.filter((function(e){return n=Object.values(e),t=k,n.map((function(e){return String(e).toLowerCase()})).find((function(e){return e.includes(t.toString().toLowerCase())}));var n,t}));console.log("result2222",$),console.log("persons2222",t),console.log("newFilterword2222",k);var z=function(e){console.log("handleDelete",t),window.confirm("Do you really want to delete ".concat(t[e-1].name,"?"))&&b(e).then((function(n){console.log("deletedeletedelete",n.data),l(t.filter((function(n){return n.id!==e})))})).catch((function(n){console.log(n),R("Information of '".concat(t[e-1].name,"' has already been removed from the server")),setTimeout((function(){R(null)}),5e3)}))};return Object(a.jsxs)("div",{children:[Object(a.jsx)(v,{message:L}),Object(a.jsx)(p,{message:T}),Object(a.jsx)("h2",{children:"Phonebook"}),"filter shown with"," ",Object(a.jsx)("input",{value:k,onChange:function(e){D(e.target.value)}}),Object(a.jsx)("p",{children:$.map((function(e,n){return Object(a.jsx)(O,{filterResult:e},n)}))}),Object(a.jsx)("h1",{children:"add a new"}),Object(a.jsx)(g,{addName:function(e){var n=Object(o.a)({},t);console.log("personsCopy",n),console.log("newName",i),console.log("personsCopy0.name",n[0].name),console.log("personspersons",t),e.preventDefault(),console.log("button clicked",e.target);var c={name:i,number:N};if(console.log("addnameObject",c),console.log("nameObject.name",c.name),0===String(c.name).replace(/(^\s*)|(\s*$)/g,"").length||0===String(c.number).replace(/(^\s*)|(\s*$)/g,"").length)console.log("nameObject.name",c.name),alert("empty string,plz reconfirm");else if(-1===JSON.stringify(n).indexOf(JSON.stringify(i)))j(c).then((function(e){A("Note '".concat(i,"' was add successfully")),setTimeout((function(){A(null)}),5e3),l(t.concat(e.data)),d(""),y("")}));else{var a=t.find((function(e){return e.name===i}));"undefined"!==typeof a&&a.number!==N?m(a.id,{name:a.name,number:N}).then((function(e){window.confirm("".concat(e.name," is already added to phonebook,replace the old number with a new one?"))&&l(t.map((function(n){return n.id!==a.id?n:e}))),d(""),y("")})).catch((function(e){console.log("fail"),R("Information of '".concat(i,"' has already been removed from the server")),setTimeout((function(){R(null)}),5e3)})):"undefined"!==typeof a&&(alert("".concat(i," is already added to phonebook")),d(""),y(""))}},newName:i,handleNameChange:function(e){console.log(e.target.value),d(e.target.value)},newNumber:N,handleNumberChange:function(e){console.log(e.target.value),y(e.target.value)}}),Object(a.jsx)("h2",{children:"Numbers"}),Object(a.jsx)("p",{children:t.map((function(e,n){return Object(a.jsx)(h,{persons:e,handleDelete:function(){return z(e.id)}},n)}))})]})};n.default=x;s.a.render(Object(a.jsx)(x,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.95f35676.chunk.js.map